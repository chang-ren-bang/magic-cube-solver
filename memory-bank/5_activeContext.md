# 5. 當前背景 (Active Context)

## 當前工作焦點

*   **專案初始化**: 建立基本的專案結構和 Memory Bank 文件。
*   **基礎 HTML/CSS**: 設定主要的 HTML 檔案，包含 Canvas 元素和控制按鈕的區域，以及基礎的 CSS 樣式。
*   **Canvas 設置**: 在 JavaScript 中獲取 Canvas 元素及其 2D 繪圖上下文 (Context)。

## 近期變更

*   建立了 Memory Bank 的所有核心文件 (1-6)。
*   建立了 `index.html`, `style.css`, `main.js`。
*   在 `main.js` 中實作了基礎的 3D 立方體渲染：
    *   定義了頂點、面和顏色。
    *   實作了 Y 軸和 X 軸旋轉函數。
    *   實作了簡單的透視投影函數。
    *   建立了一個動畫迴圈 (`requestAnimationFrame`)，使立方體持續旋轉。
    *   實作了基於面平均 Z 值的簡單深度排序繪製。

## 下一步計畫

1.  **程式碼組織**: 將 `main.js` 中的 3D 渲染邏輯 (頂點/面數據、轉換函數、繪圖函數) 提取到一個獨立的模組或類別中 (例如 `CubeRenderer.js`)，以提高可維護性。
2.  **魔術方塊結構**: 將單一立方體的渲染擴展為 3x3x3 的魔術方塊結構。這需要：
    *   定義 27 個小立方體 (cubies) 的位置和初始狀態。
    *   修改渲染邏輯以繪製所有小立方體。
    *   設計數據結構來表示整個魔術方塊的狀態（每個小方塊的位置和每個面的顏色）。
3.  **隨機產生功能**: 開始實作「隨機產生」按鈕的功能，需要：
    *   找到或實作一個產生隨機打亂序列的方法。
    *   實作應用該序列來修改魔術方塊狀態的邏輯。

## 當前決策與考量

*   **檔案結構**: 採用簡單的根目錄結構 (`index.html`, `style.css`, `main.js`)，並將 Memory Bank 放在 `memory-bank/` 子目錄中。未來可能根據複雜度增加而建立 `src/` 或 `js/` 等子目錄。
*   **渲染起點**: 從最基本的單一立方體渲染開始，逐步增加複雜度到 3x3x3 的魔術方塊。

## 重要模式與偏好

*   **原生優先**: 盡可能使用瀏覽器原生 API (HTML, CSS, JS, Canvas 2D)，避免引入大型框架或函式庫，除非必要 (例如解題演算法)。
*   **模組化**: 儘早開始將程式碼組織成模組 (ES6 Modules)。
*   **註解與可讀性**: 保持程式碼清晰、易於理解，特別是涉及複雜 3D 計算和狀態管理的部分。

## 學習與洞見

*   (尚無，專案剛開始)
